
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Imputaci√≥n Formal de Cargos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    textarea { white-space: pre-line; }
    .modal-bg { background-color: rgba(0, 0, 0, 0.7); }
  </style>
</head>
<body class="bg-gray-900 text-white p-6 space-y-6">

  <div class="flex items-center justify-center gap-4 mb-4">
    <img src="https://i.imgur.com/VX1gCFR.png" alt="Logo" class="w-12 h-12">
    <h1 class="text-2xl font-bold text-center">Imputaci√≥n Formal de Cargos</h1>
  </div>

  <div class="flex justify-center mb-4">
    <button onclick="window.location.href='https://pabletorg.github.io/sigp/index.html'" class="bg-gray-600 hover:bg-gray-700 p-2 px-4 rounded font-medium">Volver al men√∫ principal</button>
  </div>

  <div class="space-y-4 max-w-3xl mx-auto">

    <div class="grid grid-cols-3 gap-4">
      <label class="block">
        <span class="text-lg font-medium">D√≠a:</span>
        <input type="text" id="dia" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
      </label>
      <label class="block">
        <span class="text-lg font-medium">Mes:</span>
        <input type="text" id="mes" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
      </label>
      <label class="block">
        <span class="text-lg font-medium">A√±o:</span>
        <input type="text" id="anio" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
      </label>
    </div>

    <!-- Secci√≥n de Personas Implicadas -->
    <div>
      <h2 class="text-xl font-bold mt-4 mb-2">Personas Implicadas</h2>
      <div id="personas"></div>
      <button onclick="abrirModal('modalPersona')" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">‚ûï A√±adir Persona</button>
    </div>

    <!-- Secci√≥n de Formulaci√≥n de Cargos -->
    <div>
      <h2 class="text-xl font-bold mt-6 mb-2">Formulaci√≥n de Cargos</h2>
      <div id="cargos"></div>
      <button onclick="abrirModal('modalCargo')" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">‚ûï A√±adir Cargo</button>
    </div>

    <!-- OTROS -->
    <label class="block mt-4">
      <span class="text-lg font-medium">Informaci√≥n adicional (OTROS):</span>
      <textarea id="otros" rows="3" class="w-full p-2 rounded bg-gray-800 text-white mt-1"></textarea>
    </label>

    <!-- Firma -->
    <h2 class="text-xl font-bold mt-6 mb-2">Firma</h2>
    <label class="block">
      <span class="text-lg font-medium">Agente:</span>
      <input type="text" id="agente" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
    </label>
    <label class="block">
      <span class="text-lg font-medium">Rango:</span>
      <input type="text" id="rango" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
    </label>
    <label class="block">
      <span class="text-lg font-medium">Placa:</span>
      <input type="text" id="placa" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
    </label>
    <label class="block">
      <span class="text-lg font-medium">Firma:</span>
      <input type="text" id="firma" class="w-full p-2 rounded bg-gray-800 text-white mt-1">
    </label>

    <!-- Botones -->
    <div class="flex flex-col sm:flex-row gap-4 mt-4">
      <button onclick="generarBBCode()" class="w-full bg-green-600 hover:bg-green-700 p-3 rounded font-bold">Generar BBCode</button>
      <button onclick="location.reload()" class="w-full bg-red-600 hover:bg-red-700 p-3 rounded font-bold">Limpiar</button>
    </div>

    <!-- Resultado -->
    <label class="block">
      <span class="text-lg font-medium">Resultado (BBCode):</span>
      <div class="flex gap-2 mt-1">
        <textarea id="resultado" rows="20" readonly class="w-full p-2 rounded bg-gray-800 text-green-400"></textarea>
        <button onclick="copiarTexto('resultado')" class="bg-yellow-500 hover:bg-yellow-600 px-4 rounded h-12 mt-1">üìã</button>
      </div>
    </label>
  </div>

  <!-- Modales -->
  <div id="modalPersona" class="hidden fixed inset-0 modal-bg z-50 flex items-center justify-center">
    <div class="bg-gray-800 p-6 rounded w-full max-w-xl space-y-4">
      <h2 class="text-xl font-bold mb-2">A√±adir Persona Implicada</h2>
      <input type="text" id="personaNombre" placeholder="Nombre y Apellido" class="w-full p-2 rounded bg-gray-700 text-white">
      <input type="text" id="personaDNI" placeholder="DNI" class="w-full p-2 rounded bg-gray-700 text-white">
      <div class="space-y-1 text-sm">
        <label><input type="checkbox" value="VICTIMA" class="rol"> V√çCTIMA</label>
        <label><input type="checkbox" value="TESTIGO" class="rol"> TESTIGO</label>
        <label><input type="checkbox" value="AUTOR" class="rol"> AUTOR</label>
        <label><input type="checkbox" value="C√ìMPLICE" class="rol"> C√ìMPLICE</label>
        <label><input type="checkbox" value="COOPERADOR" class="rol"> COOPERADOR</label>
        <label><input type="checkbox" value="INDUCTOR" class="rol"> INDUCTOR</label>
      </div>
      <div class="flex justify-end gap-2">
        <button onclick="cerrarModal('modalPersona')" class="bg-gray-600 px-4 py-2 rounded">Cancelar</button>
        <button onclick="confirmarPersona()" class="bg-blue-600 px-4 py-2 rounded">A√±adir</button>
      </div>
    </div>
  </div>

  <div id="modalCargo" class="hidden fixed inset-0 modal-bg z-50 flex items-center justify-center">
    <div class="bg-gray-800 p-6 rounded w-full max-w-xl space-y-4">
      <h2 class="text-xl font-bold mb-2">A√±adir Formulaci√≥n de Cargo</h2>
      <input type="text" id="cargoTitulo" placeholder="T√≠tulo" class="w-full p-2 rounded bg-gray-700 text-white">
      <input type="text" id="cargoArticulo" placeholder="Art√≠culo" class="w-full p-2 rounded bg-gray-700 text-white">
      <input type="text" id="cargoAgravantes" placeholder="Agravantes" class="w-full p-2 rounded bg-gray-700 text-white">
      <input type="text" id="cargoAtenuantes" placeholder="Atenuantes" class="w-full p-2 rounded bg-gray-700 text-white">
      <input type="text" id="cargoExenciones" placeholder="Exenciones" class="w-full p-2 rounded bg-gray-700 text-white">
      <input type="text" id="cargoOtros" placeholder="Otros" class="w-full p-2 rounded bg-gray-700 text-white">
      <div class="flex justify-end gap-2">
        <button onclick="cerrarModal('modalCargo')" class="bg-gray-600 px-4 py-2 rounded">Cancelar</button>
        <button onclick="confirmarCargo()" class="bg-blue-600 px-4 py-2 rounded">A√±adir</button>
      </div>
    </div>
  </div>

<script>
function abrirModal(id) {
  document.getElementById(id).classList.remove("hidden");
}

function cerrarModal(id) {
  document.getElementById(id).classList.add("hidden");
}

function confirmarPersona() {
  const nombre = document.getElementById("personaNombre").value;
  const dni = document.getElementById("personaDNI").value;
  const roles = Array.from(document.querySelectorAll("#modalPersona .rol")).map(c => \`\${c.value} [\${c.checked ? 'X' : ' '}] \`).join(" | ");
  const bloque = document.createElement("div");
  bloque.className = "bg-gray-800 border p-4 rounded mt-2";
  bloque.innerText = `[b]1.1.1 Nombre y apellido:[/b] ${nombre}\n[b]1.1.2 N√∫mero de DNI:[/b] ${dni}\n[b]1.1.3.1 Rol de la persona:[/b] ${roles}`;
  document.getElementById("personas").appendChild(bloque);
  cerrarModal("modalPersona");
}

function confirmarCargo() {
  const t = id => document.getElementById(id).value;
  const bloque = document.createElement("div");
  bloque.className = "bg-gray-800 border p-4 rounded mt-2";
  bloque.innerText = `[b]2.1 TITULO:[/b] ${t("cargoTitulo")} | [b]ART√çCULO:[/b] ${t("cargoArticulo")}\n[b]2.1.1 AGRAVANTES:[/b] ${t("cargoAgravantes")}\n[b]2.1.2 ATENUANTES:[/b] ${t("cargoAtenuantes")}\n[b]2.1.3 EXENCIONES:[/b] ${t("cargoExenciones")}\n[b]2.1.4 OTROS:[/b] ${t("cargoOtros")}`;
  document.getElementById("cargos").appendChild(bloque);
  cerrarModal("modalCargo");
}

function copiarTexto(id) {
  const el = document.getElementById(id);
  el.select();
  document.execCommand("copy");
}

function generarBBCode() {
  const dia = document.getElementById("dia").value;
  const mes = document.getElementById("mes").value;
  const anio = document.getElementById("anio").value;
  const otros = document.getElementById("otros").value;
  const agente = document.getElementById("agente").value;
  const rango = document.getElementById("rango").value;
  const placa = document.getElementById("placa").value;
  const firma = document.getElementById("firma").value;

  const personas = Array.from(document.querySelectorAll("#personas > div")).map(d => d.innerText).join("\n\n");
  const cargos = Array.from(document.querySelectorAll("#cargos > div")).map(d => d.innerText).join("\n\n");

  const bbcode = `[quote]
[img(400px,82px)]https://i.servimg.com/u/f35/20/25/05/51/marca_32.png[/img]
[font=Courier New][size=18][b]IMPUTACI√ìN FORMAL DE CARGOS ANTE EL TRIBUNAL[/b][/size]
[size=16][b]A ${dia} de ${mes} del a√±o ${anio}.[/b][/size][/font]
[hr]
[font=Courier New][size=16][b]1. DATOS DEL SUMARIO[/b][/size]

[b]1.1 PERSONAS:[/b] 
${personas}

[b]1.2 DOCUMENTACI√ìN:[/b]
[spoiler="informe.pdf"](Anexar aqu√≠ el informe y/o cualquier documento necesario)[/spoiler]

[b]1.3 OTROS:[/b]
> ${otros}[/font]

[hr]
[font=Courier New][size=16][b]2. FORMULACI√ìN DE CARGOS.[/b][/size]
${cargos}
[hr]
[font=Courier New][size=16][b]3. DATOS, FIRMA Y COMPROMISO[/b][/size]

Diligenciado este formulario, entiendo que el sumario y toda informaci√≥n anexa ha sido compulsada a la Fiscal√≠a de Riverside y al tribunal competente para su respectiva atenci√≥n. Doy fe de que la informaci√≥n aqu√≠ presentada es ver√≠dica.

[b]AGENTE:[/b] ${agente}
[b]RANGO:[/b] ${rango}
[b]PLACA:[/b] ${placa}

[b]Firma,[/b]
${firma}
[/font]
<hr size="3" />
[right][i][size=10]Departamento de Justicia.[/size][/i][/right]
[/quote]`;

  document.getElementById("resultado").value = bbcode;
}
</script>

</body>
</html>
